(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{112:function(t,e,n){},113:function(t,e,n){},145:function(t,e,n){"use strict";n.r(e);var a,c,i=n(5),r=n(0),o=n.n(r),s=n(10),d=n.n(s),l=(n(112),n(113),n(184)),u=n(185),j=n(186),f=n(179),O=n(187),b=n(182),p=n(188),h=n(189),T=n(95),m=n.n(T),v=n(16),S=n(57),g=n.n(S),x=n(74),I=n(50),k=n(8),y=n(44),C=n.n(y),E=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"a409a2ec-60ad-4ff6-9051-8f6025edc2fd"}}),A=function(){return E.get("todo-lists")},w=function(t){return E.post("todo-lists",{title:t})},D=function(t){return E.delete("todo-lists/".concat(t))},L=function(t,e){return E.put("todo-lists/".concat(t),{title:e})},N={status:"succeeded",error:null},P=function(t){return{type:"APP/SET-STATUS",status:t}},_=function(t){return{type:"APP/SET-ERROR",error:t}},R=function(t,e){t.messages.length?e(_(t.messages[0])):e(_("Some error occurred")),e(P("failed"))},K=function(t,e){e(_(t.message)),e(P("failed"))},U=[],H=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",id:t,entityStatus:e}},G=n(183),M=n(146),F=n(36),V=n(190),Y=n(180),B=o.a.memo((function(t){var e=t.addItem,n=t.disabled,a=void 0!==n&&n,c=Object(r.useState)(null),o=Object(F.a)(c,2),s=o[0],d=o[1],l=Object(r.useState)(""),u=Object(F.a)(l,2),j=u[0],O=u[1],b=function(){""!==j.trim()?(e(j.trim()),O("")):d("Title is required")};return Object(i.jsxs)("div",{children:[Object(i.jsx)(V.a,{value:j,disabled:a,onChange:function(t){O(t.currentTarget.value)},onKeyPress:function(t){null!==s&&d(null),"Enter"===t.key&&b()},error:!!s,label:j,helperText:s,variant:"outlined",className:""}),Object(i.jsx)(f.a,{size:"small",color:"primary",onClick:b,disabled:a,children:Object(i.jsx)(Y.a,{})})]})})),z=n(181),J=o.a.memo((function(t){var e=t.value,n=t.onChange,a=t.disabled,c=void 0!==a&&a,s=o.a.useState(!1),d=Object(F.a)(s,2),l=d[0],u=d[1],j=Object(r.useState)(e),f=Object(F.a)(j,2),O=f[0],b=f[1];return l?Object(i.jsx)(V.a,{variant:"outlined",value:O,onChange:function(t){b(t.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(u(!1),n(O))},autoFocus:!0,onBlur:function(){u(!1),n(O)}}):Object(i.jsx)("span",{onDoubleClick:function(){c||(u(!0),b(e))},children:O})})),X=n(192),q=n(23),Q=C.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"a409a2ec-60ad-4ff6-9051-8f6025edc2fd"}}),W=function(t){return Q.get("todo-lists/".concat(t,"/tasks"))},Z=function(t,e){return Q.post("todo-lists/".concat(t,"/tasks"),{title:e})},$=function(t,e){return Q.delete("todo-lists/".concat(e,"/tasks/").concat(t))},tt=function(t,e,n){return Q.put("todo-lists/".concat(t,"/tasks/").concat(e),n)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var et={},nt=function(t,e,n){return{type:"CHANGE-TASK-ENTITY-STATUS",taskId:t,todolistId:e,entityStatus:n}},at=function(t,e,n){return function(a,c){var i=c().tasks[e].find((function(e){return e.id===t}));if(i){var r=Object(k.a)({title:i.title,description:i.description,status:i.status,priority:i.priority,startDate:i.startDate,deadline:i.deadline},n);a(P("loading")),a(nt(t,e,"loading")),tt(e,t,r).then((function(c){if(0===c.data.resultCode){var i=function(t,e,n){return{type:"UPDATE_TASK",taskId:t,model:e,todolistId:n}}(t,n,e);a(i),a(P("succeeded")),a(nt(t,e,"succeeded"))}else R(c.data,a)})).catch((function(t){K(t,a)}))}else console.warn("task not found in the state")}},ct=o.a.memo((function(t){var e=t.todolistId,n=t.task,c=Object(v.b)(),o=Object(r.useCallback)((function(){c(function(t,e){return function(n){n(P("loading")),n(nt(t,e,"loading")),$(t,e).then((function(a){if(0===a.data.resultCode){var c=function(t,e){return{type:"REMOVE_TASK",taskId:t,todolistId:e}}(t,e);n(c),n(P("succeeded"))}else R(a.data,n)})).catch((function(t){K(t,n)}))}}(n.id,e))}),[n.id,e]),s=Object(r.useCallback)((function(t){var i=t.currentTarget.checked?a.Completed:a.New;c(at(n.id,e,{status:i}))}),[n.id,e]),d=Object(r.useCallback)((function(t){c(at(n.id,e,{title:t}))}),[n.id,e]),l="loading"===n.entityStatus;return Object(i.jsxs)("div",{className:n.status===a.Completed?"task__wrapper is-done":"task__wrapper",children:[Object(i.jsx)(X.a,{color:"primary",onChange:s,checked:n.status===a.Completed,disabled:l}),Object(i.jsx)(J,{value:n.title,onChange:d,disabled:l}),Object(i.jsx)(f.a,{onClick:o,disabled:l,children:Object(i.jsx)(z.a,{})})]})})),it=o.a.memo((function(t){var e=Object(v.b)();Object(r.useEffect)((function(){var n;e((n=t.todolistId,function(t){t(P("loading")),W(n).then((function(e){var a=function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(e.data.items,n);t(a),t(P("succeeded"))})).catch((function(e){K(e,t)}))}))}),[]);var n=Object(r.useCallback)((function(n){e(function(t,e){return function(n){n(P("loading")),Z(e,t).then((function(t){if(0===t.data.resultCode){var e={type:"ADD_TASK",task:t.data.data.item};n(e),n(P("succeeded"))}else R(t.data,n)})).catch((function(t){K(t,n)}))}}(n.trim(),t.todolistId))}),[e]),c=Object(r.useCallback)((function(n){var a,c;e((a=t.todolistId,c=n,function(t){t(P("loading")),t(H(a,"loading")),L(a,c).then((function(e){if(0===e.data.resultCode){var n=function(t,e){return{type:"CHANGE-TITLE",id:t,title:e}}(a,c);t(n),t(P("succeeded")),t(H(a,"succeeded"))}else R(e.data,t)})).catch((function(e){K(e,t)}))}))}),[e,t.todolistId]),o=Object(r.useCallback)((function(t,n){e({type:"CHANGE-FILTER",filter:t,id:n})}),[e]),s=Object(r.useCallback)((function(t){var n;e((n=t,function(t){t(P("loading")),t(H(n,"loading")),D(n).then((function(e){0===e.data.resultCode?(t({type:"REMOVE-TODOLIST",id:n}),t(P("succeeded"))):R(e.data,t)})).catch((function(e){K(e,t)}))}))}),[]),d=Object(r.useCallback)((function(){o("all",t.todolistId)}),[]),l=Object(r.useCallback)((function(){o("active",t.todolistId)}),[]),u=Object(r.useCallback)((function(){o("completed",t.todolistId)}),[]),j=t.tasks,O=j;"active"===t.filter&&(O=j.filter((function(t){return t.status===a.New}))),"completed"===t.filter&&(O=j.filter((function(t){return t.status===a.Completed})));var p=O.map((function(e){return Object(i.jsx)(ct,{task:e,todolistId:t.todolistId},e.id)})),h="loading"===t.todolist.entityStatus;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"title__wrapper",children:[Object(i.jsx)(J,{value:t.title,onChange:c,disabled:h}),Object(i.jsx)(f.a,{onClick:function(){return s(t.todolistId)},disabled:h,children:Object(i.jsx)(z.a,{})})]}),Object(i.jsx)(B,{addItem:n,disabled:h}),Object(i.jsx)("div",{children:p}),Object(i.jsxs)("div",{children:[Object(i.jsx)(b.a,{variant:"outlined",color:"all"===t.filter?"secondary":"primary",size:"small",onClick:d,children:"All"}),Object(i.jsx)(b.a,{variant:"outlined",color:"active"===t.filter?"secondary":"primary",size:"small",onClick:l,children:"Active"}),Object(i.jsx)(b.a,{variant:"outlined",color:"completed"===t.filter?"secondary":"primary",size:"small",onClick:u,children:"Completed"})]})]})})),rt=function(){var t=Object(v.c)((function(t){return t.todolists})),e=Object(v.c)((function(t){return t.tasks})),n=Object(v.b)();Object(r.useEffect)((function(){n((function(t){t(P("loading")),A().then((function(e){t({type:"SET-TODOS",todos:e.data}),t(P("succeeded"))})).catch((function(e){K(e,t)}))}))}),[]);var a=Object(r.useCallback)((function(t){n(function(t){return function(){var e=Object(x.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(P("loading")),e.next=4,w(t).then((function(t){if(0===t.data.resultCode){var e={type:"ADD-TODOLIST",todo:t.data.data.item};n(e),n(P("succeeded"))}else R(t.data,n)})).catch((function(t){K(t,n)}));case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}(t))}),[]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(G.a,{container:!0,style:{padding:"20px"},justify:"center",alignItems:"center",direction:"column",children:[Object(i.jsx)("div",{style:{marginRight:"20px"},children:"Add new task"}),Object(i.jsx)(B,{addItem:a})]}),Object(i.jsx)(G.a,{container:!0,spacing:3,children:t.map((function(t){var n=e[t.id];return Object(i.jsx)(G.a,{item:!0,style:{padding:"20px"},children:Object(i.jsx)(M.a,{style:{padding:"10px"},children:Object(i.jsx)(it,{todolist:t,title:t.title,tasks:n,filter:t.filter,todolistId:t.id},t.id)})},t.id)}))})]})},ot=n(195),st=n(191);function dt(t){return Object(i.jsx)(st.a,Object(k.a)({elevation:6,variant:"filled"},t))}function lt(){var t=Object(v.c)((function(t){return t.app.error})),e=Object(v.b)(),n=function(t,n){"clickaway"!==n&&e(_(null))};return Object(i.jsx)(ot.a,{open:null!==t,autoHideDuration:4e3,onClose:n,children:Object(i.jsx)(dt,{onClose:n,severity:"error",children:t})})}var ut=Object(l.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}}}));var jt=function(){var t=Object(v.c)((function(t){return t.app.status})),e=ut();return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(lt,{}),Object(i.jsx)(u.a,{position:"static",children:Object(i.jsxs)(j.a,{children:[Object(i.jsx)(f.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(i.jsx)(m.a,{})}),Object(i.jsx)(O.a,{variant:"h6",className:e.title,children:"My TODO"}),Object(i.jsx)(b.a,{color:"inherit",children:"Login"})]})}),"loading"===t&&Object(i.jsx)(p.a,{color:"primary"}),Object(i.jsx)(h.a,{fixed:!0,children:Object(i.jsx)(rt,{})})]})},ft=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,196)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,i=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),i(t),r(t)}))},Ot=n(34),bt=n(96),pt=Object(Ot.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TASKS":return Object(k.a)(Object(k.a)({},t),{},Object(q.a)({},e.todolistId,e.tasks));case"ADD_TASK":return Object(k.a)(Object(k.a)({},t),{},Object(q.a)({},e.task.todoListId,[e.task].concat(Object(I.a)(t[e.task.todoListId]))));case"REMOVE_TASK":return Object(k.a)(Object(k.a)({},t),{},Object(q.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"UPDATE_TASK":return Object(k.a)(Object(k.a)({},t),{},Object(q.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(k.a)(Object(k.a)({},t),e.model):t}))));case"CHANGE-TASK-ENTITY-STATUS":return Object(k.a)(Object(k.a)({},t),{},Object(q.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(k.a)(Object(k.a)({},t),{},{entityStatus:e.entityStatus}):t}))));case"SET-TODOS":var n=Object(k.a)({},t);return e.todos.forEach((function(t){n[t.id]=[]})),n;case"ADD-TODOLIST":return Object(k.a)(Object(k.a)({},t),{},Object(q.a)({},e.todo.id,[]));case"REMOVE-TODOLIST":var a=Object(k.a)({},t);return delete a[e.id],a;default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODOS":return e.todos.map((function(t){return Object(k.a)(Object(k.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"ADD-TODOLIST":return[Object(k.a)(Object(k.a)({},e.todo),{},{filter:"all",entityStatus:"idle"})].concat(Object(I.a)(t));case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"CHANGE-FILTER":return t.map((function(t){return t.id===e.id?Object(k.a)(Object(k.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TITLE":return t.map((function(t){return t.id===e.id?Object(k.a)(Object(k.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(k.a)(Object(k.a)({},t),{},{entityStatus:e.entityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(k.a)(Object(k.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(k.a)(Object(k.a)({},t),{},{error:e.error});default:return t}}}),ht="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||compose,Tt=Object(Ot.d)(pt,ht(Object(Ot.a)(bt.a)));window.store=Tt,d.a.render(Object(i.jsx)(v.a,{store:Tt,children:Object(i.jsx)(jt,{})}),document.getElementById("root")),ft()}},[[145,1,2]]]);
//# sourceMappingURL=main.75228caa.chunk.js.map